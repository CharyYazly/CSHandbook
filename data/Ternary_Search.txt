## Introduction

Ternary search is a search that finds a local minimum or maximum value in a function given the interval between A and B. 

If there are multiple local minimum and maximum values, ternary search will find one of them but not necessarily the maximum value of all points.

{{ternarysearch.png}}

## Implementation

Let's say we have a function f(x) with only one max point between A and B. We want to find the point f(M) where f(M) is maximum between A and B.

We split the range from A to B into three intervals. At every iteration of our algorithm, we can narrow down the range by 1/3 and we have a new interval. At every step, we can remove one of the intervals based on the following:

Let m1 by 1/3 of the way from A and B and let m2 be 2/3 of the way from B.

{{ternarysearch.png}}

**Case 1** : f(m1) < f(m2)

 * **Case 1.1**:  mvv1vv < mvv2vv < M

    {{ternarycase11.png}}
        
 * **Case 1.2**: mvv1vv < M < mvv2vv
        
    {{ternarycase12.png}}
        
 * **Case 1.3**: M < mvv1vv < mvv2vv is not possible.

Thus if f(mvv1vv) < f(mvv2vv), then M > mvv1vv thus the maximum point cannot be in the first third and we can remove it. The new range becomes from mvv1vv to B.

{{ternarycase1.png}}

**Case 2**: f(mvv1vv) >= f(mvv2vv)

 * **Case 2.1**: mvv1vv < M < mvv2vv

    {{ternarycase21.png}}

 * **Case 2.2**: x < mvv1vv < mvv2vv

    {{ternarycase22.png}}

 * **Case 2.3**: mvv1vv < mvv2vv < M is not possible

Thus, if f(mvv1vv) >= f(mvv2vv) then M < mvv2vv thus the maximum point cannot be in the last third and we can remove it. The new range must be from A to mvv2vv.

{{ternarycase2.png}}

Therefore, based on the values of f(mvv1vv) and f(mvv2vv) we can always remove a third of the range. We can keep doing this until the range is within a very small threshold like 0.0001.

### Example

Example of ternary search:

{{ternarysearch.png}}

{{ternarysearch2.png}}

{{ternarysearch3.png}}

{{ternarysearch4.png}}

{{ternarysearch5.png}}

{{ternarysearch6.png}}

{{ternarysearch7.png}}

### Formalization

[[[[
Let f(x) be the function.
Let (a, b) be interval of search.

Let tern(a,b) return M where f(M) is the maximum.

Let m1 = a + (b - a) / 3
Let m2 = a + (b - a) * 2 / 3

tern(a,b) = (a + b) / 2 if |f(a) - f(b)| < epsilon
tern(a,b) = tern(m1, b) if f(a) < f(b)
tern(a,b) = tern(a, m2) otherwise
]]]]

### Code

[[[[
public double tern(double a,double b){
  if (Math.abs(f(a) - f(b)) < 0.0001) {
    return (a + b) / 2.0;
  }
  double m1 = a + (b - a) / 3.0;
  double m2 = a + (b - a) * 2.0 / 3.0;
  if (f(m1) < f(m2)) {
    return tern(m1, b);
  } else {
    return tern(a, m2);
  }
}
]]]]